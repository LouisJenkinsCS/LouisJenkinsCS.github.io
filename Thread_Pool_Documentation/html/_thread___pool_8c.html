<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Thread_Pool: Thread Pool/Code/Thread_Pool.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Thread_Pool
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Thread Pool for the C Programming Language.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_thread___pool_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Thread_Pool.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;pthread.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &quot;<a class="el" href="_thread___pool_8h_source.html">Thread_Pool.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ac23aa31b2fd0a604ca601084a90bb800"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_thread___pool_8c.html#ac23aa31b2fd0a604ca601084a90bb800">LOCK</a>(mutex)&#160;&#160;&#160;pthread_mutex_lock(mutex)</td></tr>
<tr class="memdesc:ac23aa31b2fd0a604ca601084a90bb800"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to lock the given mutex.  <a href="#ac23aa31b2fd0a604ca601084a90bb800">More...</a><br /></td></tr>
<tr class="separator:ac23aa31b2fd0a604ca601084a90bb800"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5126fc9133a1f3230ebb1f2be423f9d9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_thread___pool_8c.html#a5126fc9133a1f3230ebb1f2be423f9d9">TRYLOCK</a>(mutex)&#160;&#160;&#160;pthread_mutex_trylock(mutex)</td></tr>
<tr class="memdesc:a5126fc9133a1f3230ebb1f2be423f9d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to try to lock the mutex, returning immediately on failure.  <a href="#a5126fc9133a1f3230ebb1f2be423f9d9">More...</a><br /></td></tr>
<tr class="separator:a5126fc9133a1f3230ebb1f2be423f9d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab75c4136289e7d71035be5153b19b5d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_thread___pool_8c.html#aab75c4136289e7d71035be5153b19b5d">UNLOCK</a>(mutex)&#160;&#160;&#160;pthread_mutex_unlock(mutex)</td></tr>
<tr class="memdesc:aab75c4136289e7d71035be5153b19b5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to unlock the given mutex.  <a href="#aab75c4136289e7d71035be5153b19b5d">More...</a><br /></td></tr>
<tr class="separator:aab75c4136289e7d71035be5153b19b5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95a78f089f6a325394b0a7172997302e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_thread___pool_8c.html#a95a78f089f6a325394b0a7172997302e">WAIT</a>(condition,  mutex)&#160;&#160;&#160;pthread_cond_wait(condition, mutex)</td></tr>
<tr class="memdesc:a95a78f089f6a325394b0a7172997302e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Causes the current thread to wait for a signal to be sent.  <a href="#a95a78f089f6a325394b0a7172997302e">More...</a><br /></td></tr>
<tr class="separator:a95a78f089f6a325394b0a7172997302e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65efb54c577f309e575327a48e3438a1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_thread___pool_8c.html#a65efb54c577f309e575327a48e3438a1">SIGNAL</a>(condition)&#160;&#160;&#160;pthread_cond_signal(condition)</td></tr>
<tr class="memdesc:a65efb54c577f309e575327a48e3438a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signals a thread waiting on the condition based on a default scheduler.  <a href="#a65efb54c577f309e575327a48e3438a1">More...</a><br /></td></tr>
<tr class="separator:a65efb54c577f309e575327a48e3438a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93954f8978d7d6964a369ecd6711276d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_thread___pool_8c.html#a93954f8978d7d6964a369ecd6711276d">BROADCAST</a>(condition)&#160;&#160;&#160;pthread_cond_broadcast(condition)</td></tr>
<tr class="memdesc:a93954f8978d7d6964a369ecd6711276d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to broadcast to all threads waiting on the condition variable.  <a href="#a93954f8978d7d6964a369ecd6711276d">More...</a><br /></td></tr>
<tr class="separator:a93954f8978d7d6964a369ecd6711276d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70bf1bed622eea60920799da120e8692"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_thread___pool_8c.html#a70bf1bed622eea60920799da120e8692">PAUSE</a>(thread)&#160;&#160;&#160;pthread_kill(thread, SIGUSR1)</td></tr>
<tr class="memdesc:a70bf1bed622eea60920799da120e8692"><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro used to pause the thread, as the function name is very misleading. Sends SIGUSR1 signal.  <a href="#a70bf1bed622eea60920799da120e8692">More...</a><br /></td></tr>
<tr class="separator:a70bf1bed622eea60920799da120e8692"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac21b304e2788f1720a68da157f895184"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_thread___pool_8c.html#ac21b304e2788f1720a68da157f895184">INCREMENT</a>(var,  mutex)</td></tr>
<tr class="memdesc:ac21b304e2788f1720a68da157f895184"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to atomically increment the variable.  <a href="#ac21b304e2788f1720a68da157f895184">More...</a><br /></td></tr>
<tr class="separator:ac21b304e2788f1720a68da157f895184"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bd378fc65168cd66c8af83a07bf384e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_thread___pool_8c.html#a5bd378fc65168cd66c8af83a07bf384e">DECREMENT</a>(var,  mutex)</td></tr>
<tr class="memdesc:a5bd378fc65168cd66c8af83a07bf384e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to atomically decrement the variable.  <a href="#a5bd378fc65168cd66c8af83a07bf384e">More...</a><br /></td></tr>
<tr class="separator:a5bd378fc65168cd66c8af83a07bf384e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad53e9538fb2721d198ad5fa9199cc276"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_thread___pool_8c.html#ad53e9538fb2721d198ad5fa9199cc276">INIT_MUTEX</a>(mutex,  attr)</td></tr>
<tr class="memdesc:ad53e9538fb2721d198ad5fa9199cc276"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to quickly initialize a mutex.  <a href="#ad53e9538fb2721d198ad5fa9199cc276">More...</a><br /></td></tr>
<tr class="separator:ad53e9538fb2721d198ad5fa9199cc276"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb6e6fd026e8e393fa5545efd196fcf4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_thread___pool_8c.html#afb6e6fd026e8e393fa5545efd196fcf4">INIT_COND</a>(cond,  attr)</td></tr>
<tr class="memdesc:afb6e6fd026e8e393fa5545efd196fcf4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to quickly initialize a condition variable.  <a href="#afb6e6fd026e8e393fa5545efd196fcf4">More...</a><br /></td></tr>
<tr class="separator:afb6e6fd026e8e393fa5545efd196fcf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94db4f5104511890355a08264793aad7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_thread___pool_8c.html#a94db4f5104511890355a08264793aad7">DESTROY_MUTEX</a>(mutex)</td></tr>
<tr class="memdesc:a94db4f5104511890355a08264793aad7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free the mutex.  <a href="#a94db4f5104511890355a08264793aad7">More...</a><br /></td></tr>
<tr class="separator:a94db4f5104511890355a08264793aad7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6bb895a437a8ab3ed4c2f7fda6a1d0f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_thread___pool_8c.html#aa6bb895a437a8ab3ed4c2f7fda6a1d0f">DESTROY_COND</a>(cond)</td></tr>
<tr class="memdesc:aa6bb895a437a8ab3ed4c2f7fda6a1d0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free the condition variable.  <a href="#aa6bb895a437a8ab3ed4c2f7fda6a1d0f">More...</a><br /></td></tr>
<tr class="separator:aa6bb895a437a8ab3ed4c2f7fda6a1d0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a101eb1f242994c1c4db05d9df04fccc1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_thread___pool_8c.html#a101eb1f242994c1c4db05d9df04fccc1">TP_DEBUG</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:a101eb1f242994c1c4db05d9df04fccc1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simple macro to enable debug.  <a href="#a101eb1f242994c1c4db05d9df04fccc1">More...</a><br /></td></tr>
<tr class="separator:a101eb1f242994c1c4db05d9df04fccc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d77d27cfdf46dfc9ccd8254172ff78f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_thread___pool_8c.html#a1d77d27cfdf46dfc9ccd8254172ff78f">TP_DEBUG_PRINT</a>(str)&#160;&#160;&#160;(<a class="el" href="_thread___pool_8c.html#a101eb1f242994c1c4db05d9df04fccc1">TP_DEBUG</a> ? printf(str) : <a class="el" href="_thread___pool_8c.html#a101eb1f242994c1c4db05d9df04fccc1">TP_DEBUG</a>)</td></tr>
<tr class="memdesc:a1d77d27cfdf46dfc9ccd8254172ff78f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print a message if and only if TP_DEBUG is enabled.  <a href="#a1d77d27cfdf46dfc9ccd8254172ff78f">More...</a><br /></td></tr>
<tr class="separator:a1d77d27cfdf46dfc9ccd8254172ff78f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae717deb544d95eb9d1ab20080ef2ff72"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_thread___pool_8c.html#ae717deb544d95eb9d1ab20080ef2ff72">TP_DEBUG_PRINTF</a>(str, ...)&#160;&#160;&#160;(<a class="el" href="_thread___pool_8c.html#a101eb1f242994c1c4db05d9df04fccc1">TP_DEBUG</a> ? printf(str, __VA_ARGS__) : <a class="el" href="_thread___pool_8c.html#a101eb1f242994c1c4db05d9df04fccc1">TP_DEBUG</a>)</td></tr>
<tr class="memdesc:ae717deb544d95eb9d1ab20080ef2ff72"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print a formatted message if and only if TP_DEBUG is enabled.  <a href="#ae717deb544d95eb9d1ab20080ef2ff72">More...</a><br /></td></tr>
<tr class="separator:ae717deb544d95eb9d1ab20080ef2ff72"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5c430cfa5dae83aa5fa640c1f0dc2172"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_thread___pool_8c.html#a5c430cfa5dae83aa5fa640c1f0dc2172">Thread_Pool_Init</a> (size_t number_of_threads)</td></tr>
<tr class="memdesc:a5c430cfa5dae83aa5fa640c1f0dc2172"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for the thread pool, creating the requested amount of threads.  <a href="#a5c430cfa5dae83aa5fa640c1f0dc2172">More...</a><br /></td></tr>
<tr class="separator:a5c430cfa5dae83aa5fa640c1f0dc2172"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a169ae10080b61eff9203ad6eae4dcb0f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_result.html">Result</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_thread___pool_8c.html#a169ae10080b61eff9203ad6eae4dcb0f">Thread_Pool_Add_Task</a> (<a class="el" href="_thread___pool_8h.html#a6020f0ebe47b326c900080b168c40b53">thread_callback</a> cb, void *args)</td></tr>
<tr class="memdesc:a169ae10080b61eff9203ad6eae4dcb0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a task to the thread pool.  <a href="#a169ae10080b61eff9203ad6eae4dcb0f">More...</a><br /></td></tr>
<tr class="separator:a169ae10080b61eff9203ad6eae4dcb0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba0e69821afa14c4dbdef215bb94b775"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_thread___pool_8c.html#aba0e69821afa14c4dbdef215bb94b775">Thread_Pool_Result_Destroy</a> (<a class="el" href="struct_result.html">Result</a> *result)</td></tr>
<tr class="memdesc:aba0e69821afa14c4dbdef215bb94b775"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will destroy the <a class="el" href="struct_result.html" title="The result returned when adding a new task to the task queue. ">Result</a> and set it's reference to NULL.  <a href="#aba0e69821afa14c4dbdef215bb94b775">More...</a><br /></td></tr>
<tr class="separator:aba0e69821afa14c4dbdef215bb94b775"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc0bf55f632012b472a02a2d618baf29"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_thread___pool_8c.html#abc0bf55f632012b472a02a2d618baf29">Thread_Pool_Obtain_Result</a> (<a class="el" href="struct_result.html">Result</a> *result)</td></tr>
<tr class="memdesc:abc0bf55f632012b472a02a2d618baf29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will block until result is ready.  <a href="#abc0bf55f632012b472a02a2d618baf29">More...</a><br /></td></tr>
<tr class="separator:abc0bf55f632012b472a02a2d618baf29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74c59d87a024ea0a1df868023cbfb35a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_thread___pool_8c.html#a74c59d87a024ea0a1df868023cbfb35a">Thread_Pool_Wait</a> (void)</td></tr>
<tr class="memdesc:a74c59d87a024ea0a1df868023cbfb35a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Blocks until all tasks in the thread pool are finished.  <a href="#a74c59d87a024ea0a1df868023cbfb35a">More...</a><br /></td></tr>
<tr class="separator:a74c59d87a024ea0a1df868023cbfb35a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a438a1443bdaa8e20bb71ea23c03d0df8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_thread___pool_8c.html#a438a1443bdaa8e20bb71ea23c03d0df8">Thread_Pool_Destroy</a> (void)</td></tr>
<tr class="memdesc:a438a1443bdaa8e20bb71ea23c03d0df8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys the current thread pool, waiting for the current tasks to be finished.  <a href="#a438a1443bdaa8e20bb71ea23c03d0df8">More...</a><br /></td></tr>
<tr class="separator:a438a1443bdaa8e20bb71ea23c03d0df8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1af9879b18427f7b5fa273649bf1ba4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_thread___pool_8c.html#ab1af9879b18427f7b5fa273649bf1ba4">Thread_Pool_Pause</a> (void)</td></tr>
<tr class="memdesc:ab1af9879b18427f7b5fa273649bf1ba4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pause all operations in the task queue.  <a href="#ab1af9879b18427f7b5fa273649bf1ba4">More...</a><br /></td></tr>
<tr class="separator:ab1af9879b18427f7b5fa273649bf1ba4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb4e495587c622e9d7009639e2248d39"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_thread___pool_8c.html#afb4e495587c622e9d7009639e2248d39">Thread_Pool_Timed_Pause</a> (unsigned int seconds)</td></tr>
<tr class="separator:afb4e495587c622e9d7009639e2248d39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a582d687c426ef6de27de7346c884a92d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_thread___pool_8c.html#a582d687c426ef6de27de7346c884a92d">Thread_Pool_Resume</a> (void)</td></tr>
<tr class="memdesc:a582d687c426ef6de27de7346c884a92d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resume all worker threads that are paused.  <a href="#a582d687c426ef6de27de7346c884a92d">More...</a><br /></td></tr>
<tr class="separator:a582d687c426ef6de27de7346c884a92d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a93954f8978d7d6964a369ecd6711276d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BROADCAST</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">condition</td><td>)</td>
          <td>&#160;&#160;&#160;pthread_cond_broadcast(condition)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used to broadcast to all threads waiting on the condition variable. </p>

</div>
</div>
<a class="anchor" id="a5bd378fc65168cd66c8af83a07bf384e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DECREMENT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">mutex&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { <a class="code" href="_thread___pool_8c.html#ac23aa31b2fd0a604ca601084a90bb800">\</a></div>
<div class="line"><a class="code" href="_thread___pool_8c.html#ac23aa31b2fd0a604ca601084a90bb800">			LOCK</a>(mutex); \</div>
<div class="line">            var--; <a class="code" href="_thread___pool_8c.html#aab75c4136289e7d71035be5153b19b5d">\</a></div>
<div class="line"><a class="code" href="_thread___pool_8c.html#aab75c4136289e7d71035be5153b19b5d">			UNLOCK</a>(mutex); \</div>
<div class="line">        } <span class="keywordflow">while</span>(0)</div>
<div class="ttc" id="_thread___pool_8c_html_ac23aa31b2fd0a604ca601084a90bb800"><div class="ttname"><a href="_thread___pool_8c.html#ac23aa31b2fd0a604ca601084a90bb800">LOCK</a></div><div class="ttdeci">#define LOCK(mutex)</div><div class="ttdoc">Used to lock the given mutex. </div><div class="ttdef"><b>Definition:</b> Thread_Pool.c:10</div></div>
<div class="ttc" id="_thread___pool_8c_html_aab75c4136289e7d71035be5153b19b5d"><div class="ttname"><a href="_thread___pool_8c.html#aab75c4136289e7d71035be5153b19b5d">UNLOCK</a></div><div class="ttdeci">#define UNLOCK(mutex)</div><div class="ttdoc">Used to unlock the given mutex. </div><div class="ttdef"><b>Definition:</b> Thread_Pool.c:14</div></div>
</div><!-- fragment -->
<p>Used to atomically decrement the variable. </p>

</div>
</div>
<a class="anchor" id="aa6bb895a437a8ab3ed4c2f7fda6a1d0f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DESTROY_COND</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cond</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div>
<div class="line">                pthread_cond_destroy(cond); \</div>
<div class="line">                free(cond); \</div>
<div class="line">            } <span class="keywordflow">while</span>(0)</div>
</div><!-- fragment -->
<p>Free the condition variable. </p>

</div>
</div>
<a class="anchor" id="a94db4f5104511890355a08264793aad7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DESTROY_MUTEX</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">mutex</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div>
<div class="line">                pthread_mutex_destroy(mutex); \</div>
<div class="line">                free(mutex); \</div>
<div class="line">            } <span class="keywordflow">while</span>(0)</div>
</div><!-- fragment -->
<p>Free the mutex. </p>

</div>
</div>
<a class="anchor" id="ac21b304e2788f1720a68da157f895184"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INCREMENT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">mutex&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { <a class="code" href="_thread___pool_8c.html#ac23aa31b2fd0a604ca601084a90bb800">\</a></div>
<div class="line"><a class="code" href="_thread___pool_8c.html#ac23aa31b2fd0a604ca601084a90bb800">			LOCK</a>(mutex); \</div>
<div class="line">            var++; <a class="code" href="_thread___pool_8c.html#aab75c4136289e7d71035be5153b19b5d">\</a></div>
<div class="line"><a class="code" href="_thread___pool_8c.html#aab75c4136289e7d71035be5153b19b5d">			UNLOCK</a>(mutex); \</div>
<div class="line">        } <span class="keywordflow">while</span>(0)</div>
<div class="ttc" id="_thread___pool_8c_html_ac23aa31b2fd0a604ca601084a90bb800"><div class="ttname"><a href="_thread___pool_8c.html#ac23aa31b2fd0a604ca601084a90bb800">LOCK</a></div><div class="ttdeci">#define LOCK(mutex)</div><div class="ttdoc">Used to lock the given mutex. </div><div class="ttdef"><b>Definition:</b> Thread_Pool.c:10</div></div>
<div class="ttc" id="_thread___pool_8c_html_aab75c4136289e7d71035be5153b19b5d"><div class="ttname"><a href="_thread___pool_8c.html#aab75c4136289e7d71035be5153b19b5d">UNLOCK</a></div><div class="ttdeci">#define UNLOCK(mutex)</div><div class="ttdoc">Used to unlock the given mutex. </div><div class="ttdef"><b>Definition:</b> Thread_Pool.c:14</div></div>
</div><!-- fragment -->
<p>Used to atomically increment the variable. </p>

</div>
</div>
<a class="anchor" id="afb6e6fd026e8e393fa5545efd196fcf4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INIT_COND</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cond, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">attr&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div>
<div class="line">               cond = malloc(<span class="keyword">sizeof</span>(pthread_cond_t)); \</div>
<div class="line">               pthread_cond_init(cond, attr); \</div>
<div class="line">            } <span class="keywordflow">while</span>(0)</div>
</div><!-- fragment -->
<p>Used to quickly initialize a condition variable. </p>

</div>
</div>
<a class="anchor" id="ad53e9538fb2721d198ad5fa9199cc276"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INIT_MUTEX</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">mutex, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">attr&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div>
<div class="line">               mutex = malloc(<span class="keyword">sizeof</span>(pthread_mutex_t)); \</div>
<div class="line">               pthread_mutex_init(mutex, attr); \</div>
<div class="line">            } <span class="keywordflow">while</span>(0)</div>
</div><!-- fragment -->
<p>Used to quickly initialize a mutex. </p>

</div>
</div>
<a class="anchor" id="ac23aa31b2fd0a604ca601084a90bb800"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOCK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">mutex</td><td>)</td>
          <td>&#160;&#160;&#160;pthread_mutex_lock(mutex)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used to lock the given mutex. </p>

</div>
</div>
<a class="anchor" id="a70bf1bed622eea60920799da120e8692"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PAUSE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">thread</td><td>)</td>
          <td>&#160;&#160;&#160;pthread_kill(thread, SIGUSR1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Macro used to pause the thread, as the function name is very misleading. Sends SIGUSR1 signal. </p>

</div>
</div>
<a class="anchor" id="a65efb54c577f309e575327a48e3438a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SIGNAL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">condition</td><td>)</td>
          <td>&#160;&#160;&#160;pthread_cond_signal(condition)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Signals a thread waiting on the condition based on a default scheduler. </p>

</div>
</div>
<a class="anchor" id="a101eb1f242994c1c4db05d9df04fccc1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TP_DEBUG&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Simple macro to enable debug. </p>

</div>
</div>
<a class="anchor" id="a1d77d27cfdf46dfc9ccd8254172ff78f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TP_DEBUG_PRINT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">str</td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="_thread___pool_8c.html#a101eb1f242994c1c4db05d9df04fccc1">TP_DEBUG</a> ? printf(str) : <a class="el" href="_thread___pool_8c.html#a101eb1f242994c1c4db05d9df04fccc1">TP_DEBUG</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print a message if and only if TP_DEBUG is enabled. </p>

</div>
</div>
<a class="anchor" id="ae717deb544d95eb9d1ab20080ef2ff72"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TP_DEBUG_PRINTF</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">str, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(<a class="el" href="_thread___pool_8c.html#a101eb1f242994c1c4db05d9df04fccc1">TP_DEBUG</a> ? printf(str, __VA_ARGS__) : <a class="el" href="_thread___pool_8c.html#a101eb1f242994c1c4db05d9df04fccc1">TP_DEBUG</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print a formatted message if and only if TP_DEBUG is enabled. </p>

</div>
</div>
<a class="anchor" id="a5126fc9133a1f3230ebb1f2be423f9d9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRYLOCK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">mutex</td><td>)</td>
          <td>&#160;&#160;&#160;pthread_mutex_trylock(mutex)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used to try to lock the mutex, returning immediately on failure. </p>

</div>
</div>
<a class="anchor" id="aab75c4136289e7d71035be5153b19b5d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UNLOCK</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">mutex</td><td>)</td>
          <td>&#160;&#160;&#160;pthread_mutex_unlock(mutex)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used to unlock the given mutex. </p>

</div>
</div>
<a class="anchor" id="a95a78f089f6a325394b0a7172997302e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WAIT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">condition, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">mutex&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;pthread_cond_wait(condition, mutex)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Causes the current thread to wait for a signal to be sent. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a169ae10080b61eff9203ad6eae4dcb0f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_result.html">Result</a>* Thread_Pool_Add_Task </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_thread___pool_8h.html#a6020f0ebe47b326c900080b168c40b53">thread_callback</a>&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a task to the thread pool. </p>
<p>Callback must return a pointer * and arguments must also be a pointer. Alternatively, you can cast the function pointer to a void pointer like such: (void *)function; Doing so results in undefined behavior, but allows it to work if you do not really want the result. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cb</td><td>Callback function to be called as the task. </td></tr>
    <tr><td class="paramname">args</td><td>Arguments to pass to the thread pool. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The result from the task to be obtained later. </dd></dl>

</div>
</div>
<a class="anchor" id="a438a1443bdaa8e20bb71ea23c03d0df8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Thread_Pool_Destroy </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroys the current thread pool, waiting for the current tasks to be finished. </p>
<dl class="section return"><dt>Returns</dt><dd>1 on success. </dd></dl>

</div>
</div>
<a class="anchor" id="a5c430cfa5dae83aa5fa640c1f0dc2172"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Thread_Pool_Init </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>number_of_threads</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor for the thread pool, creating the requested amount of threads. </p>
<p>Used to initialize the static variable in the source file, and should not be called (yet, no checks for if the thread pool currently exists are implemented yet) if one already exists, as it may result in undefined behavior. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">number_of_threads</td><td>Amount of worker threads to initialize at startup. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success. </dd></dl>

</div>
</div>
<a class="anchor" id="abc0bf55f632012b472a02a2d618baf29"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* Thread_Pool_Obtain_Result </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_result.html">Result</a> *&#160;</td>
          <td class="paramname"><em>result</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Will block until result is ready. </p>
<p>Obtain the result from a <a class="el" href="struct_result.html" title="The result returned when adding a new task to the task queue. ">Result</a>, blocking until it's ready. </p>

</div>
</div>
<a class="anchor" id="ab1af9879b18427f7b5fa273649bf1ba4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Thread_Pool_Pause </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pause all operations in the task queue. </p>
<p>Warning: May be unstable if critical operations are being performed. </p><dl class="section return"><dt>Returns</dt><dd>1 on success, 0 if at least one thread is not able to pause. </dd></dl>

</div>
</div>
<a class="anchor" id="aba0e69821afa14c4dbdef215bb94b775"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Thread_Pool_Result_Destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_result.html">Result</a> *&#160;</td>
          <td class="paramname"><em>result</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Will destroy the <a class="el" href="struct_result.html" title="The result returned when adding a new task to the task queue. ">Result</a> and set it's reference to NULL. </p>
<p>Destroys the <a class="el" href="struct_result.html" title="The result returned when adding a new task to the task queue. ">Result</a> from a task. </p>

</div>
</div>
<a class="anchor" id="a582d687c426ef6de27de7346c884a92d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Thread_Pool_Resume </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resume all worker threads that are paused. </p>
<p>If no threads are waiting, nothing happens. </p><dl class="section return"><dt>Returns</dt><dd>1 on success, 0 if at least one thread cannot be resumed. </dd></dl>

</div>
</div>
<a class="anchor" id="afb4e495587c622e9d7009639e2248d39"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Thread_Pool_Timed_Pause </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>seconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a74c59d87a024ea0a1df868023cbfb35a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Thread_Pool_Wait </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Blocks until all tasks in the thread pool are finished. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_540d1d663e04e7f390679f9f9ead392b.html">Thread Pool</a></li><li class="navelem"><a class="el" href="dir_8f0bb4c87ef0c14650d8c6d18257856f.html">Code</a></li><li class="navelem"><a class="el" href="_thread___pool_8c.html">Thread_Pool.c</a></li>
    <li class="footer">Generated on Fri May 22 2015 16:24:29 for Thread_Pool by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
